<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AktivitÃ¤ts-Logs â€“ Gaming of Republic</title>
  <link rel="stylesheet" href="assets/css/layout.css">
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">ğŸ•¹ï¸ Gaming of Republic</div>
    <button id="logoutBtn" class="btn delete top-right">Abmelden</button>
    <div class="sidebar-scroll">
      <ul>
        <li><a href="index.html">ğŸ  Ãœbersicht</a></li>
        <li><a href="products.html">ğŸ“¦ Produkte</a></li>
        <li><a href="users.html">ğŸ‘¥ Benutzer</a></li>
        <li><a href="tasks.html">âœ… Aufgaben</a></li>
        <li><a href="logs.html" class="active">ğŸ“‘ AktivitÃ¤ts-Logs</a></li>
        <li><a href="settings.html">âš™ï¸ Einstellungen</a></li>
      </ul>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="content">
    <h1>AktivitÃ¤ts-Logs</h1>

    <!-- Filter -->
    <div class="card">
      <h2>Filter</h2>
      <input type="text" id="filterUser" placeholder="Benutzer filtern">
      <input type="text" id="filterAction" placeholder="Aktion filtern">
      <button id="applyFilterBtn" class="btn">ğŸ” Anwenden</button>
      <button id="resetFilterBtn" class="btn delete">âŒ ZurÃ¼cksetzen</button>
    </div>

    <!-- Logs Tabelle -->
    <div class="card">
      <h2>Protokollierte Aktionen</h2>
      <table>
        <thead>
          <tr>
            <th>Zeitstempel</th>
            <th>Benutzer</th>
            <th>Aktion</th>
            <th>Aktionen</th>
          </tr>
        </thead>
        <tbody id="logTable">
          <tr>
            <td>2026-01-18 05:00</td>
            <td>admin@gamingofrepublic.com</td>
            <td>Produkt \"Energy Drink Neon\" hinzugefÃ¼gt</td>
            <td>
              <button class="btn editLog">âœï¸ Bearbeiten</button>
              <button class="btn delete">ğŸ—‘ï¸ LÃ¶schen</button>
            </td>
          </tr>
          <tr>
            <td>2026-01-18 05:10</td>
            <td>editor@gamingofrepublic.com</td>
            <td>Bild fÃ¼r Produkt \"Gaming Chair\" aktualisiert</td>
            <td>
              <button class="btn editLog">âœï¸ Bearbeiten</button>
              <button class="btn delete">ğŸ—‘ï¸ LÃ¶schen</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Neue Aktion hinzufÃ¼gen -->
    <div class="card">
      <h2>Neue Aktion protokollieren</h2>
      <input type="text" id="logUser" placeholder="Benutzername oder E-Mail">
      <input type="text" id="logAction" placeholder="Aktion">
      <button id="addLogBtn" class="btn">â• HinzufÃ¼gen</button>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <p id="footerText"></p>
  </footer>

  <!-- Auth und Logik -->
  <script src="assets/js/auth.js"></script>
  <script>
    document.getElementById("logoutBtn").addEventListener("click", handleLogout);

    // Neue Logs hinzufÃ¼gen
    document.getElementById("addLogBtn").addEventListener("click", () => {
      const logUser = document.getElementById("logUser").value.trim();
      const logAction = document.getElementById("logAction").value.trim();
      if (!logUser || !logAction) {
        alert("Bitte Benutzer und Aktion eingeben!");
        return;
      }
      const now = new Date();
      const timestamp = now.toISOString().slice(0,16).replace("T"," ");
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${timestamp}</td>
        <td>${logUser}</td>
        <td>${logAction}</td>
        <td>
          <button class="btn editLog">âœï¸ Bearbeiten</button>
          <button class="btn delete">ğŸ—‘ï¸ LÃ¶schen</button>
        </td>
      `;
      document.getElementById("logTable").appendChild(row);
      attachRowEvents(row);
      document.getElementById("logUser").value = "";
      document.getElementById("logAction").value = "";
    });

    // Filter anwenden
    document.getElementById("applyFilterBtn").addEventListener("click", () => {
      const userFilter = document.getElementById("filterUser").value.toLowerCase();
      const actionFilter = document.getElementById("filterAction").value.toLowerCase();
      const rows = document.querySelectorAll("#logTable tr");
      rows.forEach(row => {
        const user = row.cells[1].textContent.toLowerCase();
        const action = row.cells[2].textContent.toLowerCase();
        row.style.display = (user.includes(userFilter) && action.includes(actionFilter)) ? "" : "none";
      });
    });

    // Filter zurÃ¼cksetzen
    document.getElementById("resetFilterBtn").addEventListener("click", () => {
      document.getElementById("filterUser").value = "";
      document.getElementById("filterAction").value = "";
      const rows = document.querySelectorAll("#logTable tr");
      rows.forEach(row => row.style.display = "");
    });

    // Events fÃ¼r bestehende Zeilen
    document.querySelectorAll("#logTable tr").forEach(attachRowEvents);

    function attachRowEvents(row) {
      row.querySelector(".editLog").addEventListener("click", () => {
        alert("Bearbeiten-Modus: Felder sind direkt editierbar.");
        row.cells[1].setAttribute("contenteditable", "true");
        row.cells[2].setAttribute("contenteditable", "true");
      });
      row.querySelector(".delete").addEventListener("click", () => row.remove());
    }
  </script>
</body>
</html>
